<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hello World</title>
</head>
<body>
<div style="margin-top: 10px;">
        <label for="inputString">Enter a string:</label><br>
        <textarea id="inputString" placeholder="Enter a string here" rows="7" cols="15"></textarea>
    </div>
<div style="margin-top: 10px;">
    <span>Result:</span><br>
    <table id="resultTable" style="margin-top: 5px;"></table>
</div>
<script>
    const input = document.getElementById('inputString');
    const resultTable = document.getElementById('resultTable');
    input.addEventListener('input', function() {
        const str = input.value;
        const lines = str.split('\n');
        resultTable.innerHTML = '';
        for (let i = 0; i < lines.length; i++) {
            const line = lines[i];
            if (line.trim() === '') continue; // Skip empty lines
            let asciiCodes = [];
            let numBuffer = '';
            let numSum = 0;
            for (let ch of line) {
                if (ch >= '0' && ch <= '9') {
                    numBuffer += ch;
                } else {
                    if (numBuffer.length > 0) {
                        numSum += numBuffer.split('').reduce((acc, digit) => acc + parseInt(digit, 10), 0);
                        numBuffer = '';
                    }
                    // Odd line: small letters, even line: large letters
                    if (i % 2 === 0 && ch >= 'a' && ch <= 'z') {
                        asciiCodes.push(ch.charCodeAt(0));
                    } else if (i % 2 === 1 && ch >= 'a' && ch <= 'z') {
                        // Convert to uppercase and get ASCII
                        asciiCodes.push(ch.toUpperCase().charCodeAt(0));
                    }
                }
            }
            if (numBuffer.length > 0) {
                numSum += numBuffer.split('').reduce((acc, digit) => acc + parseInt(digit, 10), 0);
            }
            if (numSum > 0) {
                asciiCodes.push(numSum);
            }
            // If no letters matched, but there was a number, only show the sum
            if (asciiCodes.length === 0 && numSum > 0) {
                asciiCodes.push(numSum);
            }
            const lineSum = asciiCodes.reduce((acc, val) => acc + Number(val), 0);
            const lineMod = lineSum % 49;
            const row = document.createElement('tr');
            const cell1 = document.createElement('td');
            cell1.textContent = asciiCodes.join(' ');
            const cell2 = document.createElement('td');
            cell2.textContent = '=';
            const cell3 = document.createElement('td');
            cell3.textContent = lineSum;
            const cell4 = document.createElement('td');
            cell4.textContent = '%49';
            const cell5 = document.createElement('td');
            cell5.textContent = lineMod;
            cell5.style.fontWeight = 'bold';
            cell5.style.border = '2px solid black';
            row.appendChild(cell1);
            row.appendChild(cell2);
            row.appendChild(cell3);
            row.appendChild(cell4);
            row.appendChild(cell5);
            resultTable.appendChild(row);
        }
    });
</script>
</body>
</html>
